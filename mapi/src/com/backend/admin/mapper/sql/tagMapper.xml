<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.backend.admin.mapper.TagMapper">

    <resultMap type="com.backend.admin.entity.Tag" id="TagMap">
        <result property="tag_id" column="tag_id" jdbcType="INTEGER"/>
        <result property="tag_name" column="tag_name" jdbcType="VARCHAR"/>
        <result property="tag_color" column="tag_color" jdbcType="VARCHAR"/>
        <result property="account_id" column="account_id" jdbcType="INTEGER"/>
        <result property="tag_type" column="tag_type" jdbcType="INTEGER"/>
        <result property="order_type" column="order_type" jdbcType="INTEGER"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="TagMap">
        select
          tag_id, tag_name, tag_color, account_id, tag_type, order_type
        from tag
        where tag_id = #{tag_id}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="TagMap">
        select
          tag_id, tag_name, tag_color, account_id, tag_type, order_type
        from tag
        <where>
            <if test="tag_id != null">
                and tag_id = #{tag_id}
            </if>
            <if test="tag_name != null and tag_name != ''">
                and tag_name = #{tag_name}
            </if>
            <if test="tag_color != null and tag_color != ''">
                and tag_color = #{tag_color}
            </if>
            <if test="account_id != null">
                and account_id = #{account_id}
            </if>
            <if test="tag_type != null">
                and tag_type = #{tag_type}
            </if>
            <if test="order_type != null">
                and order_type = #{order_type}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="tag_id" useGeneratedKeys="true">
        insert into tag(tag_name, tag_color, account_id, tag_type, order_type)
        values (#{tag_name}, #{tag_color}, #{account_id}, #{tag_type}, #{order_type})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update tag
        <set>
            <if test="tag_name != null and tag_name != ''">
                tag_name = #{tag_name},
            </if>
            <if test="tag_color != null and tag_color != ''">
                tag_color = #{tag_color},
            </if>
            <if test="account_id != null">
                account_id = #{account_id},
            </if>
            <if test="tag_type != null">
                tag_type = #{tag_type},
            </if>
            <if test="order_type != null">
                order_type = #{order_type},
            </if>
        </set>
        where tag_id = #{tag_id}
    </update>

</mapper>